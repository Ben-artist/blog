<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>探索浏览器呈现过程 | TSK</title>
    <meta name="description" content="Home of TSK">
    <meta name="generator" content="VitePress v2.0.0-alpha.11">
    <link rel="preload stylesheet" href="/blog/assets/style.BrNpTd-l.css" as="style">
    <link rel="preload stylesheet" href="/blog/vp-icons.css" as="style">
    
    <script type="module" src="/blog/assets/app.DYOAuMv8.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.BUXTglGw.js">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.DPO_DQk3.js">
    <link rel="modulepreload" href="/blog/assets/posts_browser-rendering.md.CtiJJuq1.lean.js">
    <link rel="icon" type="image/png" href="https://power-mall-2.oss-cn-beijing.aliyuncs.com/avator.png">
    <meta name="author" content="TSK">
    <meta property="og:title" content="Home">
    <meta property="og:description" content="Home of TSK">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-921fbe14 data-v-5c305cf1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0ce2acc1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0ce2acc1>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5c305cf1 data-v-828124ca><div class="VPNavBar" data-v-828124ca data-v-a6985511><div class="wrapper" data-v-a6985511><div class="container" data-v-a6985511><div class="title" data-v-a6985511><div class="VPNavBarTitle" data-v-a6985511 data-v-a6dc18c0><a class="title" href="/blog/" data-v-a6dc18c0><!--[--><!--]--><!----><span data-v-a6dc18c0>TSK</span><!--[--><!--]--></a></div></div><div class="content" data-v-a6985511><div class="content-body" data-v-a6985511><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a6985511><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a6985511 data-v-4594c104><span id="main-nav-aria-label" class="visually-hidden" data-v-4594c104> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-4594c104 data-v-fc2e884e><!--[--><span data-v-fc2e884e>🏡Blogs</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/tags.html" tabindex="0" data-v-4594c104 data-v-fc2e884e><!--[--><span data-v-fc2e884e>🔖Tags</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/archives.html" tabindex="0" data-v-4594c104 data-v-fc2e884e><!--[--><span data-v-fc2e884e>📃Archives</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a6985511 data-v-af85b417><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af85b417 data-v-bfda6320 data-v-094806d9><span class="check" data-v-094806d9><span class="icon" data-v-094806d9><!--[--><span class="vpi-sun sun" data-v-bfda6320></span><span class="vpi-moon moon" data-v-bfda6320></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a6985511 data-v-7fd52932 data-v-56ae26a9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/tangtts" aria-label="github" target="_blank" rel="me noopener" data-v-56ae26a9 data-v-b049ad9d><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://x.com/home?locale=zh-cn" aria-label="twitter" target="_blank" rel="me noopener" data-v-56ae26a9 data-v-b049ad9d><span class="vpi-social-twitter"></span></a><a class="VPSocialLink no-icon" href="mailto:tskwangyi@gmail.com" aria-label target="_blank" rel="me noopener" data-v-56ae26a9 data-v-b049ad9d><svg role="img" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20">
          <path d="M874.666667 375.189333V746.666667a64 64 0 0 1-64 64H213.333333a64 64 0 0 1-64-64V375.189333l266.090667 225.6a149.333333 149.333333 0 0 0 193.152 0L874.666667 375.189333zM810.666667 213.333333a64.789333 64.789333 0 0 1 22.826666 4.181334 63.616 63.616 0 0 1 26.794667 19.413333 64.32 64.32 0 0 1 9.344 15.466667c2.773333 6.570667 4.48 13.696 4.906667 21.184L874.666667 277.333333v21.333334L553.536 572.586667a64 64 0 0 1-79.893333 2.538666l-3.178667-2.56L149.333333 298.666667v-21.333334a63.786667 63.786667 0 0 1 35.136-57.130666A63.872 63.872 0 0 1 213.333333 213.333333h597.333334z" ></path>
          </svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a6985511 data-v-f1b45d4e data-v-6478141f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6478141f><span class="vpi-more-horizontal icon" data-v-6478141f></span></button><div class="menu" data-v-6478141f><div class="VPMenu" data-v-6478141f data-v-7001ea82><!----><!--[--><!--[--><!----><div class="group" data-v-f1b45d4e><div class="item appearance" data-v-f1b45d4e><p class="label" data-v-f1b45d4e>Appearance</p><div class="appearance-action" data-v-f1b45d4e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f1b45d4e data-v-bfda6320 data-v-094806d9><span class="check" data-v-094806d9><span class="icon" data-v-094806d9><!--[--><span class="vpi-sun sun" data-v-bfda6320></span><span class="vpi-moon moon" data-v-bfda6320></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f1b45d4e><div class="item social-links" data-v-f1b45d4e><div class="VPSocialLinks social-links-list" data-v-f1b45d4e data-v-56ae26a9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/tangtts" aria-label="github" target="_blank" rel="me noopener" data-v-56ae26a9 data-v-b049ad9d><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://x.com/home?locale=zh-cn" aria-label="twitter" target="_blank" rel="me noopener" data-v-56ae26a9 data-v-b049ad9d><span class="vpi-social-twitter"></span></a><a class="VPSocialLink no-icon" href="mailto:tskwangyi@gmail.com" aria-label target="_blank" rel="me noopener" data-v-56ae26a9 data-v-b049ad9d><svg role="img" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20">
          <path d="M874.666667 375.189333V746.666667a64 64 0 0 1-64 64H213.333333a64 64 0 0 1-64-64V375.189333l266.090667 225.6a149.333333 149.333333 0 0 0 193.152 0L874.666667 375.189333zM810.666667 213.333333a64.789333 64.789333 0 0 1 22.826666 4.181334 63.616 63.616 0 0 1 26.794667 19.413333 64.32 64.32 0 0 1 9.344 15.466667c2.773333 6.570667 4.48 13.696 4.906667 21.184L874.666667 277.333333v21.333334L553.536 572.586667a64 64 0 0 1-79.893333 2.538666l-3.178667-2.56L149.333333 298.666667v-21.333334a63.786667 63.786667 0 0 1 35.136-57.130666A63.872 63.872 0 0 1 213.333333 213.333333h597.333334z" ></path>
          </svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a6985511 data-v-c2753b1e><span class="container" data-v-c2753b1e><span class="top" data-v-c2753b1e></span><span class="middle" data-v-c2753b1e></span><span class="bottom" data-v-c2753b1e></span></span></button></div></div></div></div><div class="divider" data-v-a6985511><div class="divider-line" data-v-a6985511></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5c305cf1 data-v-84e6427c><div class="container" data-v-84e6427c><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-84e6427c data-v-f21c8b90><button data-v-f21c8b90>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5c305cf1 data-v-c915dc7a><div class="VPDoc" data-v-c915dc7a data-v-cd9e52ac><!--[--><!--]--><div class="container" data-v-cd9e52ac><!----><div class="content" data-v-cd9e52ac><div class="content-container" data-v-cd9e52ac><!--[--><!--[--><!--[--><!--[--><h1 class="title" data-v-ac80d3c4>探索浏览器呈现过程</h1><div class="date" data-v-ac80d3c4>🕒 Published at: </div><!--]--><!----><!--]--><!--]--><!--]--><main class="main" data-v-cd9e52ac><div style="position:relative;" class="vp-doc _blog_posts_browser-rendering" data-v-cd9e52ac><div><p>浏览器中键入 URL 和显示网页之间会发生什么情况？我们以交互的方式探讨一下浏览器的复杂渲染过程</p><hr><p><a href="https://abhisaha.com/blog/exploring-browser-rendering-process" target="_blank" rel="noreferrer">原文链接</a></p><p>浏览器的渲染过程是多个线程、进程和阶段的复杂编排，可将原始 HTML、CSS 和 JavaScript 转换为我们屏幕上的交互式像素。因此，从本质上讲，我们的目标是了解输入 URL 和显示网页之间发生了什么。</p><h2 id="navigation-and-network-导航和网络" tabindex="-1">Navigation and Network 导航和网络 <a class="header-anchor" href="#navigation-and-network-导航和网络" aria-label="Permalink to “Navigation and Network 导航和网络”">​</a></h2><p>假设我们正在尝试加载 <a href="https://example.com" target="_blank" rel="noreferrer">https://example.com</a>。浏览器不知道从哪里获取此网站的内容。这只是我们人类可以理解的名字。浏览器需要将此名称转换为 IP 地址。这就是 DNS 查找发挥作用的地方</p><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><p>DNS stands for <strong>Domain Name System</strong>. DNS 代表域名系统。该系统使用指定的权威名称服务器将域名映射到数字 IP 地址。</p></div><video src="/blog/assets/navigationNetwork.Gy9ydd6j.mov" controls></video><p>上面的演示可视化了 DNS 查找过程，也称为查询历程。查询历程涉及将您输入的域名转换为 IP 地址所需的每个步骤。查询的第一站是递归服务器，然后它联系一系列权威名称服务器，将域名转换为 IP 地址。最终，将返回所请求域的 IP 地址。</p><p>所以现在我们有了 IP 地址，浏览器现在可以与托管网站的服务器建立连接。这是使用 TCP 握手过程完成的。</p><h2 id="tcp-tls-handshake-tcp-tls-握手" tabindex="-1">TCP/TLS Handshake TCP/TLS 握手 <a class="header-anchor" href="#tcp-tls-handshake-tcp-tls-握手" aria-label="Permalink to “TCP/TLS Handshake   TCP/TLS 握手”">​</a></h2><p>TCP （Transmission Control Protocol） 握手是一个三步过程，用于在客户端和服务器之间建立连接。它由客户端和服务器之间交换的一组数据包组成，以确保可靠的连接。这三个步骤是：</p><ol><li>SYN：客户端向服务器发送同步 （SYN） 数据包以启动连接。</li><li>SYN-ACK：服务器使用确认 （SYN-ACK） 数据包向客户端进行响应。</li><li>ACK：客户端向服务器发送确认 （ACK） 以完成握手。</li></ol><p>此时，我们只与服务器建立了连接。下一步是保护此连接。还记得 URL 旁边的 https 锁图标吗？这定义了一个安全连接，并使用另一种称为 TLS 握手的握手来完成。</p><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><p>密码 - 密码是一种用于加密和解密数据的算法。它用于保护 Internet 上的数据传输。</p><p>证书 – 证书是包含有关网站身份和公钥信息的文件。它用作数字签名来验证网站的真实性。</p><p>证书颁发机构 （CA） - 证书颁发机构是向网站颁发数字证书的受信任实体。它验证网站的身份并确保证书的真实性。</p><p>公钥 - 公钥用于在通过 Internet 发送数据之前对其进行加密。它与客户端共享以建立安全连接。</p><p>私钥 - 私钥用于解密从客户端接收的数据。它是保密的，不会与任何人共享。</p></div><p>TLS 握手过程有多个步骤。我将它们分为 4 大类：</p><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><p>您好消息： 客户端发送 <em>ClientHello</em> 消息以启动握手，服务器使用 <em>ServerHello</em> 消息及其数字证书进行响应。</p><p>密钥交换： 服务器可以发送密钥交换信息，而 Client 端使用自己的密钥交换消息（如果需要，则使用证书）进行响应。</p><p>密码规格： 客户端发送 <em>CipherSpec</em> 消息以切换到协商加密，并在其后发送 <em>Finished</em> 消息。</p><p>服务器完成： 服务器使用自己的 <em>CipherSpec</em> 和 <em>Finished</em> 消息进行回复，完成握手并建立安全连接。</p></div><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>SSL 或安全套接字层是为 HTTP 开发的原始安全协议。SSL 在一段时间前被 TLS（即传输层安全）取代。SSL 握手现在称为 TLS 握手，尽管“SSL”名称仍被广泛使用。</p></div><video src="/blog/assets/tlsHandshake.S0wZkJL4.mov" controls></video><p>在流程的这一步，尚未传输任何实际内容或应用程序数据。服务器仅确认连接并建立了安全通道。浏览器 （客户端） 在后台处理所有这些协商过程。只有在 TLS 握手完成并且双方交换了 Finished 消息后，他们才能开始安全地发送和接收加密内容。</p><h2 id="http-request-response-cycle-http-请求-响应周期" tabindex="-1">HTTP Request/Response Cycle HTTP 请求/响应周期 <a class="header-anchor" href="#http-request-response-cycle-http-请求-响应周期" aria-label="Permalink to “HTTP Request/Response Cycle HTTP 请求/响应周期”">​</a></h2><p>所以现在浏览器请求网站的内容。服务器处理此请求并发回响应。这就是 HTTP 请求/响应周期发挥作用的地方。后端开发人员负责处理请求，而前端开发人员对此周期的响应部分更感兴趣。观看下面的演示以可视化此循环。</p><video src="/blog/assets/requestFlow.CSf_EdUe.mov" controls></video><p>我们在上面的演示中看到了一个名为 TTFB 的东西。TTFB 代表 Time To First Byte。它是服务器响应 Client 端请求发送第一个字节数据所花费的时间。它是衡量服务器响应时间和网站性能的重要指标。较低的 TTFB 表示更快的服务器响应时间。</p><p>正如您在演示中看到的，在收到第一个字节后，响应将继续加载。服务器仍在处理请求并将剩余数据发送回客户端。从这时起，浏览器开始处理响应</p><h3 id="tokenization-分词化" tabindex="-1">Tokenization 分词化 <a class="header-anchor" href="#tokenization-分词化" aria-label="Permalink to “Tokenization  分词化”">​</a></h3><p>浏览器将开始解析此 HTML 响应。它读取 HTML 的原始字节，并根据指定的文件编码（如 UTF-8）将它们转换为单个字符。以下是字节可能的外观示例</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 01001000</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 01010100</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 01001101</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 01001100</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>每组 8 位代表一个字节，每个字节都可以根据编码标准转换为字符、符号或指令。例如： 例如，在 UTF-8 编码中，字母 A 的二进制序列为 01000001。字母 B 为 01000010</p></div><p>浏览器将字符串转换为不同的标记并对其进行分组，例如 <strong><code>&lt;html&gt;</code>、<code>&lt;body&gt;</code></strong> — 以及尖括号内的其他字符串。每个标记都是一个有意义的单元，表示一个 HTML 组件。</p><h3 id="dom-tree-creation-dom-树创建" tabindex="-1">DOM Tree Creation DOM 树创建 <a class="header-anchor" href="#dom-tree-creation-dom-树创建" aria-label="Permalink to “DOM Tree Creation  DOM 树创建”">​</a></h3><p>DOM（文档对象模型）树是 HTML 文档结构的分层表示形式。它将元素表示为节点树。每个节点表示文档中的一个元素、属性或文本内容。像这样：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> lang</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">en-US</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">head</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        .</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">heading</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">            color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:#</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">0099ff</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">            font-size</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">px</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">            margin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.5</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">em</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">            color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> #</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">0099ff</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">            text-decoration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> underline</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">head</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">h1</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">heading</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">My Page</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">h1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">A paragraph with a </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">a</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://example.com/about</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">link</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre></div><p>作为参考，这是我们收到的回复。它主要具有 H1（标题）标签、P（段落）标签、A（锚点）标签和 CSS 样式</p><p>DOM 是一个树状结构，因此可以轻松显示父子关系。</p><video src="/blog/assets/domTreeCreation.Bh_R0m5v.mov" controls></video><p>每次浏览器呈现网页时，它都会经历这个多步骤的过程：将 HTML 字节解析为字符、识别标记、将它们转换为节点，最后构建 DOM 树。虽然 DOM 树定义了 HTML 元素的结构和关系，但它并不决定它们的视觉外观。这是 CSSOM 的作用。</p><h3 id="cssom-tree-creation-cssom-树创建" tabindex="-1">CSSOM Tree Creation CSSOM 树创建 <a class="header-anchor" href="#cssom-tree-creation-cssom-树创建" aria-label="Permalink to “CSSOM Tree Creation  CSSOM 树创建”">​</a></h3><p>CSS 对象模型 （CSSOM） 是应用于 HTML 文档的 CSS 样式的表示形式。它类似于 DOM 树，但表示 CSS 样式而不是 HTML 结构。CSSOM 用于计算文档中每个元素的最终样式。查看此演示，了解如何创建 CSSOM 树。</p><video src="/blog/assets/CSSOMTreeCreation.BIXuXo1U.mov" controls></video><p>浏览器将这些样式解析为简化、节省内存且优化的数据结构。此结构旨在有效地组织样式规则，从而允许根据匹配的选择器快速检索和应用样式。</p><p>构建 DOM 和 CSSOM 后，浏览器就可以开始创建渲染树了。</p><h3 id="render-tree-creation-渲染树创建" tabindex="-1">Render Tree Creation 渲染树创建 <a class="header-anchor" href="#render-tree-creation-渲染树创建" aria-label="Permalink to “Render Tree Creation  渲染树创建”">​</a></h3><p>渲染树是 DOM 和 CSSOM 树的组合。它表示页面的视觉结构，包括布局和样式信息。Render Tree 用于计算布局并在屏幕上绘制元素。</p><video src="/blog/assets/RenderTreeCreation.DDMupHfx.mov" controls></video><p>正如您在演示中看到的，渲染树是 DOM 和 CSSOM 树的组合。它仅包含将在屏幕上显示的元素。它为每个元素计算了样式和布局信息，使浏览器能够准确地呈现页面。这就把我们带到了渲染过程的最后阶段 - 布局。</p><h3 id="layouting-布局" tabindex="-1">Layouting 布局 <a class="header-anchor" href="#layouting-布局" aria-label="Permalink to “Layouting  布局”">​</a></h3><p>你可能听说过 CSS 上下文中的术语 布局。这是计算页面上每个元素的确切位置和大小的过程。布局过程包括根据 Render Tree 确定每个元素的尺寸、边距、填充、边框和位置。您可能已经看到彼此重叠的元素，例如，模态窗口、下拉列表等。这就是布局过程发挥作用的地方。</p><p>元素的流向受其显示类型的影响：块元素垂直堆叠，而内联元素水平流。static、relative、absolute、fixed 和 sticky 等定位属性进一步决定了元素彼此之间的排列方式。例如，相对定位会使元素从其正常位置偏移，而不会影响周围的布局，而绝对定位会从文档流中完全删除元素。</p><p>布局步骤的结果是显示每个元素的精确计划，然后是绘制步骤，其中视觉表示在屏幕上呈现。</p><h3 id="painting-绘制" tabindex="-1">Painting 绘制 <a class="header-anchor" href="#painting-绘制" aria-label="Permalink to “Painting  绘制”">​</a></h3><p>在绘制阶段，浏览器获取结构化布局信息并将每个元素绘制到屏幕上。此过程将填充颜色并应用图像、边框、阴影和其他视觉样式。绘制顺序基于堆叠上下文，确保根据 z-index 和其他属性正确分层元素。</p><img src="/blog/assets/paint.CR1YU11r.png"><p>绘制过程经过优化，以最大限度地减少需要重绘的像素数。浏览器使用分层、合成和缓存等技术来有效地呈现页面。</p><h3 id="browser-rendering-engines" tabindex="-1">Browser Rendering Engines <a class="header-anchor" href="#browser-rendering-engines" aria-label="Permalink to “Browser Rendering Engines”">​</a></h3><p>浏览器渲染引擎</p><p>浏览器渲染引擎是浏览器中负责呈现网页的软件组件。它将 HTML、CSS 和 JavaScript 转换为可视化内容，并处理用户交互。</p><p>不同的浏览器使用不同的渲染引擎，例如 Blink （Chrome）、WebKit （Safari） 和 Gecko （Firefox）。这些引擎可以具有不同的性能特征和兼容性级别。某些 CSS 功能或 JavaScript 方法可能在一个引擎中受支持，而在其他引擎中不受支持，或者它们的行为可能不一致。此外，不同的引擎会将其默认样式应用于 HTML 元素。</p><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to “总结”">​</a></h3><p>有很多行动正在发生，所以让我总结一下这些步骤。</p><ol><li>DNS 查找： 输入 URL 后，浏览器会执行 DNS 查找以将域名转换为 IP 地址，从而找到网站的服务器。</li><li>TCP/TLS 握手：浏览器启动 TCP 握手以与服务器建立连接。如果站点是安全的 （HTTPS），则还会执行 TLS 握手以加密数据传输。</li><li>HTTP 请求/响应周期：建立连接后，浏览器发送对网站内容的 HTTP 请求，服务器使用必要的 HTML、CSS、JavaScript 和其他资产进行响应。</li><li>标记化：浏览器将 HTML 响应作为原始数据读取，将其转换为单个字符，然后转换为标记（例如，、&lt;html&gt;、&lt;body&gt;），这有助于浏览器理解文档的结构。</li><li>DOM 树创建：浏览器构建 DOM（文档对象模型）树，这是 HTML 文档结构的分层表示，每个节点代表一个元素或文本内容。</li><li>CSSOM 树创建：浏览器解析 CSS 以创建 CSSOM（CSS 对象模型）树，该树表示与 HTML 文档元素关联的样式。</li><li>渲染树创建：DOM 和 CSSOM 树组合形成渲染树，这是页面布局的可视化表示形式，仅包含可见元素及其计算样式。</li><li>布局：浏览器根据 CSS 属性（如边距、填充和位置（例如，静态、绝对））计算屏幕上每个元素的确切大小和位置。</li><li>绘制：使用“渲染树”，浏览器在屏幕上绘制像素，填充 CSS 样式定义的颜色、图像、边框和阴影。</li></ol></div></div></main><footer class="VPDocFooter" data-v-cd9e52ac data-v-c6c7fdfb><!--[--><!--]--><!----><!----></footer><!--[--><!--[--><!--[--><!----><div id="gitalk-container" data-v-921fbe14></div><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"archives.md\":\"DOJosjZG\",\"index.md\":\"ULRTXW6B\",\"posts_algorithm-linked-list-addition.md\":\"RMgt5B3j\",\"posts_backtracking-algorithm.md\":\"DIlr4_tV\",\"posts_block-chain.md\":\"BJiie6yb\",\"posts_browser-cache.md\":\"CcUdJCuQ\",\"posts_browser-rendering.md\":\"CtiJJuq1\",\"posts_code-quality.md\":\"BhZMCH5N\",\"posts_composite-layers.md\":\"C4R4eSF9\",\"posts_dependency-collection.md\":\"ClugAKob\",\"posts_dependency-inversion.md\":\"BRZT4m8E\",\"posts_destructuring.md\":\"BrpwFmAJ\",\"posts_diff.md\":\"Cfwq9jN4\",\"posts_event-loop.md\":\"BjqxtXUZ\",\"posts_function_program.md\":\"Bb5Wgfg2\",\"posts_graphql.md\":\"nBipxVX3\",\"posts_houdini.md\":\"D62PX44B\",\"posts_http-to-https.md\":\"B3amLj8C\",\"posts_js-confuse-concept.md\":\"hjljmss_\",\"posts_network-basics.md\":\"uzVOv89W\",\"posts_nginx.md\":\"ueJpZgsv\",\"posts_pnpm-deep-dive.md\":\"CXWetFIX\",\"posts_programming-skills.md\":\"DCBjZcdC\",\"posts_promise-deep-dive.md\":\"SBHicXR9\",\"posts_ts-design.md\":\"33KRjLmi\",\"posts_virtualdomtorealdom.md\":\"DP8QOJJ8\",\"posts_vue2-reactive-system.md\":\"BjzXzJ6N\",\"readme.md\":\"CaQ9vtvh\",\"tags.md\":\"DMagD9E9\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"TSK\",\"description\":\"Home of TSK\",\"base\":\"/blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"avator\":\"https://power-mall-2.oss-cn-beijing.aliyuncs.com/avator.png\",\"posts\":[{\"frontMatter\":{\"title\":\"区块链技术原理\",\"description\":\"深入浅出地解析区块链技术的核心原理，包括密码学基础、共识机制、智能合约等关键技术，帮助读者理解区块链的本质和应用价值\",\"date\":\"2025-08-17\",\"tags\":[\"区块链\",\"密码学\",\"比特币\",\"共识机制\",\"智能合约\"]},\"regularPath\":\"/posts/block-chain.html\"},{\"frontMatter\":{\"title\":\"GraphQL深度解析：从概念到实战应用\",\"description\":\"深入理解GraphQL的核心概念、类型系统、查询语言，并通过实际代码示例掌握客户端开发技巧，让数据查询变得优雅而高效\",\"date\":\"2025-08-14\",\"tags\":[\"GraphQL\",\"API\",\"前端开发\",\"数据查询\",\"现代Web开发\"]},\"regularPath\":\"/posts/GraphQL.html\"},{\"frontMatter\":{\"title\":\"JavaScript 中令人迷惑的语法\",\"date\":\"2025-07-31\",\"tags\":[\"JavaScript\",\"ES6\",\"语法解析\",\"编程技巧\"],\"description\":\"深入解析 JavaScript 中各种令人迷惑的语法，通过 ES5 转换理解其工作原理，掌握现代 JavaScript 语法的核心概念和实际应用场景。\"},\"regularPath\":\"/posts/js-confuse-concept.html\"},{\"frontMatter\":{\"title\":\"HTTPS解决了哪些HTTP的问题：SSL/TLS协议深度解析\",\"date\":\"2025-07-15\",\"tags\":[\"网络协议\",\"网络安全\",\"HTTPS\",\"SSL/TLS\",\"加密传输\"],\"description\":\"深入解析HTTP协议的安全问题，以及SSL/TLS协议如何通过加密、认证和完整性保护来解决这些问题。\"},\"regularPath\":\"/posts/http-to-https.html\"},{\"frontMatter\":{\"title\":\"vue2 响应式系统深度解析：从原理到实现\",\"date\":\"2025-06-24\",\"tags\":[\"vue2\",\"proxy\"]},\"regularPath\":\"/posts/vue2-reactive-system.html\"},{\"frontMatter\":{\"title\":\"函数式编程：从数学思维到现代软件开发\",\"date\":\"2025-06-20\",\"tags\":[\"函数式编程\",\"编程范式\",\"JavaScript\",\"函数式思维\"],\"description\":\"深入探讨函数式编程的核心概念、数学基础、实践应用以及在现代软件开发中的价值。\"},\"regularPath\":\"/posts/function_program.html\"},{\"frontMatter\":{\"title\":\"浏览器渲染中的合成层（Composite Layers）详解\",\"date\":\"2025-03-14\",\"tags\":[\"浏览器渲染\",\"合成层\",\"性能优化\",\"GPU加速\"],\"description\":\"深入浅出地讲解浏览器渲染中的合成层，帮助开发者更好地理解和利用这一机制来优化网页性能。\"},\"regularPath\":\"/posts/composite-layers.html\"},{\"frontMatter\":{\"title\":\"pnpm深度解析：现代包管理器的革命性突破\",\"date\":\"2025-03-13\",\"tags\":[\"包管理器\",\"pnpm\",\"npm\",\"yarn\",\"前端工程化\"],\"description\":\"深入解析pnpm的技术原理、核心优势以及如何解决传统包管理器的痛点。\"},\"regularPath\":\"/posts/pnpm-deep-dive.html\"},{\"frontMatter\":{\"title\":\"网络基础系列 - 网络基础知识\",\"date\":\"2025-03-13\",\"tags\":[\"网络基础\",\"网络原理\",\"网络协议\"],\"description\":\"深入浅出地讲解网络基础知识，包含丰富的代码示例和优化技巧。\"},\"regularPath\":\"/posts/network-basics.html\"},{\"frontMatter\":{\"title\":\"设计模式系列 - 依赖倒置原则详解\",\"date\":\"2025-03-13\",\"tags\":[\"设计模式\",\"依赖倒置原则\",\"面向对象设计\",\"代码重构\"],\"description\":\"深入浅出地讲解依赖倒置原则的核心思想、实现方法及常见应用场景，包含丰富的代码示例和优化技巧。\"},\"regularPath\":\"/posts/dependency-inversion.html\"},{\"frontMatter\":{\"title\":\"算法详解 - 链表两数相加问题\",\"date\":\"2025-03-13\",\"tags\":[\"算法\",\"链表\",\"数据结构\",\"LeetCode\"],\"description\":\"深入解析链表两数相加问题的多种解法，包含详细的代码实现和优化技巧。\"},\"regularPath\":\"/posts/algorithm-linked-list-addition.html\"},{\"frontMatter\":{\"title\":\"算法系列 - 回溯算法详解\",\"date\":\"2025-03-12\",\"tags\":[\"算法\",\"回溯算法\",\"递归\",\"组合问题\",\"排列问题\"],\"description\":\"深入浅出地讲解回溯算法的核心思想、实现方法及常见应用场景，包含丰富的代码示例和优化技巧。\"},\"regularPath\":\"/posts/backtracking-algorithm.html\"},{\"frontMatter\":{\"title\":\"TS系列 - 从设计者的角度理解TypeScript\",\"date\":\"2025-03-07\",\"tags\":[\"TypeScript\",\"类型系统\",\"前端开发\"]},\"regularPath\":\"/posts/ts-design.html\"},{\"frontMatter\":{\"title\":\"日常编程技巧\",\"date\":\"2025-03-07\",\"tags\":[\"TypeScript\",\"类型系统\",\"前端开发\"]},\"regularPath\":\"/posts/programming-skills.html\"},{\"frontMatter\":{\"title\":\"深入浅出事件循环\",\"date\":\"2025-03-03\"},\"regularPath\":\"/posts/event-loop.html\"},{\"frontMatter\":{\"title\":\"Vue3系列 - Diff算法详解：原理与实现\",\"date\":\"2025-03-03\",\"tags\":[\"JavaScript\",\"Vue\",\"Diff算法\",\"性能优化\"]},\"regularPath\":\"/posts/diff.html\"},{\"frontMatter\":{\"title\":\"聊聊代码质量：从实际经验出发\",\"date\":\"2025-03-03\"},\"regularPath\":\"/posts/code-quality.html\"},{\"frontMatter\":{\"title\":\"Vue3系列 - 虚拟DOM到真实DOM\",\"date\":\"2025-03-01\",\"tags\":[\"JavaScript\",\"虚拟DOM\",\"DOM\"]},\"regularPath\":\"/posts/virtualDomToRealDom.html\"},{\"frontMatter\":{\"title\":\"Vue3系列 - 从发布订阅到响应式系统\",\"date\":\"2025-02-28\",\"tags\":[\"JavaScript\",\"Vue\",\"响应式系统\"]},\"regularPath\":\"/posts/dependency-collection.html\"},{\"frontMatter\":{\"title\":\"浏览器缓存详解：从原理到实践\",\"date\":\"2025-02-26\"},\"regularPath\":\"/posts/browser-cache.html\"},{\"frontMatter\":{\"title\":\"探索浏览器呈现过程\",\"date\":\"2025-02-23\"},\"regularPath\":\"/posts/browser-rendering.html\"},{\"frontMatter\":{\"title\":\"Promise深入解析:从零实现Promise\",\"date\":\"2025-02-21\",\"tags\":[\"JavaScript\",\"Promise\",\"异步编程\"]},\"regularPath\":\"/posts/promise-deep-dive.html\"},{\"frontMatter\":{\"title\":\"CSS Houdini：让开发者掌控浏览器渲染的魔法\",\"description\":\"深入浅出地介绍CSS Houdini API，探索如何通过JavaScript自定义CSS渲染过程，实现传统CSS无法实现的复杂布局和动画效果\",\"date\":\"2025-01-27\",\"tags\":[\"CSS\",\"JavaScript\",\"Web API\",\"前端技术\"]},\"regularPath\":\"/posts/houdini.html\"},{\"frontMatter\":{\"title\":\"深入理解Nginx\",\"date\":\"2024-03-13\",\"tags\":[\"Nginx\",\"服务器\",\"反向代理\"]},\"regularPath\":\"/posts/nginx.html\"},{\"frontMatter\":{\"title\":\"深入理解解构赋值及其原理\",\"date\":\"2024-03-12\",\"tags\":[\"JavaScript\",\"解构赋值\",\"Babel\"]},\"regularPath\":\"/posts/destructuring.html\"}],\"pageSize\":5,\"postLength\":25,\"nav\":[{\"text\":\"🏡Blogs\",\"link\":\"/\"},{\"text\":\"🔖Tags\",\"link\":\"/tags\"},{\"text\":\"📃Archives\",\"link\":\"/archives\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/tangtts\"},{\"icon\":\"twitter\",\"link\":\"https://x.com/home?locale=zh-cn\"},{\"icon\":{\"svg\":\"<svg role=\\\"img\\\" viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\">\\n          <path d=\\\"M874.666667 375.189333V746.666667a64 64 0 0 1-64 64H213.333333a64 64 0 0 1-64-64V375.189333l266.090667 225.6a149.333333 149.333333 0 0 0 193.152 0L874.666667 375.189333zM810.666667 213.333333a64.789333 64.789333 0 0 1 22.826666 4.181334 63.616 63.616 0 0 1 26.794667 19.413333 64.32 64.32 0 0 1 9.344 15.466667c2.773333 6.570667 4.48 13.696 4.906667 21.184L874.666667 277.333333v21.333334L553.536 572.586667a64 64 0 0 1-79.893333 2.538666l-3.178667-2.56L149.333333 298.666667v-21.333334a63.786667 63.786667 0 0 1 35.136-57.130666A63.872 63.872 0 0 1 213.333333 213.333333h597.333334z\\\" ></path>\\n          </svg>\"},\"link\":\"mailto:tskwangyi@gmail.com\"}],\"aside\":false},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>